!function(t){t.fn.keyboard=function(a){var e=t.extend({keyboardLayout:[[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["0","0"],["del","del"]],[["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["-","="],["_","+"]],[["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["'",":"],["@",";"],["#","~"]],[["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",","],[".","."],["?","!"]],[["shift","shift"],["space","space"],["shift","shift"]]],numpadLayout:[[["7"],["8"],["9"]],[["4"],["5"],["6"]],[["1"],["2"],["3"]],[["del"],["0"],["."]]],telLayout:[[["1"],["2"],["3"]],[["4"],["5"],["6"]],[["7"],["8"],["9"]],[["del"],["0"],["."]]],layout:!1,type:!1,btnTpl:'<button type="button">',btnClasses:"btn btn-default",btnActiveClasses:"active btn-primary",initCaps:!1,placement:"bottom"},a);e.layout||("tel"===t(this).attr("type")&&t(this).hasClass("keyboard-numpad")||"numpad"===e.type?e.layout=e.numpadLayout:"tel"===t(this).attr("type")||"tel"===e.type?e.layout=e.telLayout:e.layout=e.keyboardLayout);var s=!1;t(document).off("touchstart",".jqbtk-row .btn"),t(document).on("touchstart",".jqbtk-row .btn",function(a){t(this).addClass(e.btnActiveClasses);var o=t(this).attr("data-value"+(s?"-alt":"")),l=t("[aria-describedby="+t(this).closest(".popover").attr("id")+"]"),c=l.val();switch(o){case"space":c+=" ";break;case"shift":s=!s,n();break;case"del":c=c.substr(0,c.length-1);break;default:c+=o,s=!1}l.val(c),n(),l.focus()}),t(document).on("touchend",".jqbtk-row .btn",function(){t(this).removeClass(e.btnActiveClasses)}),t(document).on("touchstart",".jqbtk-row",function(a){a.preventDefault();var e=t("[aria-describedby="+t(this).closest(".popover").attr("id")+"]");e.focus()});var n=function(){t(".jqbtk-container .btn").each(function(){switch(t(this).attr("data-value")){case"shift":case"del":case"space":break;default:t(this).text(t(this).attr("data-value"+(s?"-alt":"")))}})};return this.each(function(){t(this).popover({content:function(){e.initCaps&&0===t(this).val().length&&(s=!0);var a=t('<div class="jqbtk-container">');return t.each(e.layout,function(){var n=this,o=t('<div class="jqbtk-row">');t.each(n,function(){var a=t(e.btnTpl).addClass(e.btnClasses);switch(a.attr("data-value",this[0]).attr("data-value-alt",this[1]),this[0]){case"shift":a.addClass("jqbtk-shift").html('<span class="glyphicon glyphicon-arrow-up"></span>');break;case"space":a.addClass("jqbtk-space").html("&nbsp;");break;case"del":a.addClass("jqbtk-del").html('<span class="glyphicon glyphicon-arrow-left"></span>');break;default:a.text(a.attr("data-value"+(s?"-alt":"")))}o.append(a)}),a.append(o)}),a},html:!0,placement:e.placement,trigger:"focus",container:"body",viewport:"body"})})}}(jQuery);
